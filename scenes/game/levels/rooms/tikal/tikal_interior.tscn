[gd_scene load_steps=19 format=3 uid="uid://27hkpqds5jet"]

[ext_resource type="Script" path="res://scenes/game/levels/rooms/sounds.gd" id="1_57487"]
[ext_resource type="Texture2D" uid="uid://dyvqsoeiyipjw" path="res://assets/sprites/scenes/tikal/mayan_temple_interior_upscaled.png" id="1_i8wbn"]
[ext_resource type="PackedScene" uid="uid://cw4xeegs5b2fq" path="res://scenes/game/character/main_character.tscn" id="2_ydvm2"]
[ext_resource type="PackedScene" uid="uid://bkjboqn4xwl7m" path="res://Camera/Camera.tscn" id="3_afvcr"]
[ext_resource type="Texture2D" uid="uid://2k8xgtlbkeqo" path="res://assets/sprites/scenes/tikal/wall.png" id="4_rfiu0"]
[ext_resource type="Texture2D" uid="uid://cxsixgx0ekrdr" path="res://assets/sprites/scenes/tikal/stone.png" id="5_syikp"]
[ext_resource type="Texture2D" uid="uid://c5axhk7hpf60u" path="res://assets/sprites/scenes/tikal/harrow.png" id="6_u74of"]
[ext_resource type="Texture2D" uid="uid://bodavr3b173r7" path="res://assets/sprites/scenes/tikal/column.png" id="7_asgqw"]
[ext_resource type="Texture2D" uid="uid://i2gsxlah1hd4" path="res://assets/sprites/scenes/tikal/back2.png" id="8_fq6ch"]
[ext_resource type="Texture2D" uid="uid://2klthllqfn3e" path="res://assets/sprites/scenes/tikal/back.png" id="8_u5rn4"]
[ext_resource type="Texture2D" uid="uid://dsia3r6jcrovm" path="res://assets/sprites/scenes/tikal/light.png" id="10_bj7sa"]
[ext_resource type="AudioStream" uid="uid://dpavsjbuqixw5" path="res://assets/sounds/Scene1.mp3" id="11_0kkbj"]
[ext_resource type="AudioStream" uid="uid://cx0jnns63mbi6" path="res://assets/sounds/Scene2.mp3" id="12_ochyu"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_2eybf"]
vertices = PackedVector2Array(576.475, 1825.79, 584.83, 1532.36, 626.603, 1597.56, 685.086, 1695.37, 726.86, 2282.23, 785.343, 2706.08, 751.924, 2771.28, 576.475, 2314.84, 543.056, 2151.82, 651.667, 2086.61, -618.249, 3260.33, -837.56, 3423.35, -979.59, 2151.82, -841.737, 1825.79, -1094.47, 1890.99, -893.954, 1695.37, 1122.66, 2579.74, 1136.24, 2465.62, 1276.18, 2282.23, 1242.76, 2543.06, 1100.73, 2836.49, 1034.94, 2754.98, 685.086, 1336.74, 818.762, 1238.93, 835.471, 1369.34, 693.441, 1434.55, 1126.84, 2282.23, 1244.85, 2151.82, 902.309, 1336.74, 935.728, 1532.36, 1019.27, 1956.2, 1061.05, 1890.99, 1111.18, 1825.79, 1211.43, 1956.2, 1089.24, 2204.8, 1034.94, 2155.89, 835.471, 2673.47, 776.988, 2217.03, 896.042, 2339.29, 900.22, 2514.53, -1061.05, 1369.34, -935.728, 1336.74, -908.575, 1564.96, 679.258, 1571.88, 726.86, 1760.58, 1203.08, 3358.14, 1211.43, 3912.4, 451.154, 3879.8, 426.09, 3847.19, 409.381, 3651.57, 409.381, 3358.14, 843.826, 3325.54, 533.657, 2824.26, 540.967, 2640.87, 618.249, 2640.87, 458.465, 2954.67, 693.441, 1564.96, -1161.3, 2021.41, -1420.3, 1988.8, -1453.72, 1075.91, -1152.95, 1271.53, -1162.35, 1173.72, -1287.67, 1010.7, -928.417, 1238.93, -1062.09, 945.495, -719.549, 1010.7, 522.169, 2530.83, 342.543, 1499.75, 142.03, 1695.37, 477.263, 2486, 100.257, 1890.99, 776.988, 1890.99, 932.594, 2208.87, 1269.92, 1988.8, 927.373, 2640.87, 902.309, 2836.49, 971.235, 2763.13, 142.03, 1467.15, -342.543, 1369.34, -527.391, 978.099, -243.331, 847.686, 182.759, 912.892, 284.06, 1271.53, -593.184, 1499.75, -735.215, 1564.96, -869.934, 1532.35, 125.321, 2282.23, 395.804, 2543.06, 148.296, 2608.27, 75.1924, 2380.04, 358.208, 2673.47, 240.198, 2771.28, 374.917, 2934.3, 315.39, 3032.11, 340.454, 3129.92, 384.317, 3260.33, 1178.01, 3195.13, 969.146, 3129.92, 1102.82, 3032.11, 985.856, 3064.71)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 7, 8, 9), PackedInt32Array(10, 11, 12, 13), PackedInt32Array(13, 12, 14, 15), PackedInt32Array(16, 17, 18, 19, 20), PackedInt32Array(21, 16, 20), PackedInt32Array(22, 23, 24, 25), PackedInt32Array(18, 17, 26, 27), PackedInt32Array(24, 28, 29), PackedInt32Array(30, 31, 32, 33, 27, 34, 35), PackedInt32Array(27, 26, 34), PackedInt32Array(36, 5, 4, 37, 38, 39), PackedInt32Array(40, 41, 42), PackedInt32Array(3, 2, 43, 30, 44), PackedInt32Array(45, 46, 47, 48, 49, 50, 51), PackedInt32Array(52, 53, 54, 51), PackedInt32Array(55, 52, 51), PackedInt32Array(56, 25, 24, 29, 30), PackedInt32Array(57, 58, 59, 14), PackedInt32Array(40, 42, 15, 14, 59, 60), PackedInt32Array(61, 60, 59, 62), PackedInt32Array(63, 61, 62, 64, 65), PackedInt32Array(54, 53, 66), PackedInt32Array(67, 54, 66), PackedInt32Array(68, 67, 66, 69, 70), PackedInt32Array(43, 56, 30), PackedInt32Array(71, 44, 30), PackedInt32Array(37, 71, 30, 35, 72), PackedInt32Array(33, 73, 27), PackedInt32Array(37, 72, 38), PackedInt32Array(36, 39, 74, 75), PackedInt32Array(75, 74, 76), PackedInt32Array(77, 78, 79, 80, 81, 82, 67), PackedInt32Array(78, 83, 84, 85, 63, 65, 79), PackedInt32Array(68, 77, 67), PackedInt32Array(86, 70, 69, 87), PackedInt32Array(88, 89, 86, 87, 90, 91), PackedInt32Array(91, 90, 92, 93), PackedInt32Array(94, 93, 92, 55, 51, 95), PackedInt32Array(50, 95, 51), PackedInt32Array(96, 45, 51, 97, 98), PackedInt32Array(98, 97, 99), PackedInt32Array(20, 98, 99, 75, 76, 21)])
outlines = Array[PackedVector2Array]([PackedVector2Array(142.03, 1467.15, 142.03, 1695.37, 100.257, 1890.99, 125.321, 2282.23, 75.1924, 2380.04, 148.296, 2608.27, 240.198, 2771.28, 315.39, 3032.11, 340.454, 3129.92, 384.317, 3260.33, 409.381, 3358.14, 409.381, 3651.57, 426.09, 3847.19, 451.154, 3879.8, 1211.43, 3912.4, 1203.08, 3358.14, 1178.01, 3195.13, 1102.82, 3032.11, 1100.73, 2836.49, 1242.76, 2543.06, 1276.18, 2282.23, 1244.85, 2151.82, 1269.92, 1988.8, 1211.43, 1956.2, 1111.18, 1825.79, 1061.05, 1890.99, 1019.27, 1956.2, 935.728, 1532.36, 902.309, 1336.74, 835.471, 1369.34, 818.762, 1238.93, 685.086, 1336.74, 693.441, 1434.55, 693.441, 1564.96, 679.258, 1571.88, 626.603, 1597.56, 584.83, 1532.36, 576.475, 1825.79, 685.086, 1695.37, 726.86, 1760.58, 776.988, 1890.99, 776.988, 2217.03, 726.86, 2282.23, 651.667, 2086.61, 543.056, 2151.82, 576.475, 2314.84, 751.924, 2771.28, 785.343, 2706.08, 835.471, 2673.47, 902.309, 2836.49, 985.856, 3064.71, 969.146, 3129.92, 843.826, 3325.54, 618.249, 2640.87, 342.543, 1499.75, 284.06, 1271.53, 182.759, 912.892, -243.331, 847.686, -527.391, 978.099, -719.549, 1010.7, -1062.09, 945.495, -1287.67, 1010.7, -1453.72, 1075.91, -1420.3, 1988.8, -1161.3, 2021.41, -1094.47, 1890.99, -979.59, 2151.82, -837.56, 3423.35, -618.249, 3260.33, -841.737, 1825.79, -893.954, 1695.37, -908.575, 1564.96, -935.728, 1336.74, -1061.05, 1369.34, -1152.95, 1271.53, -1162.35, 1173.72, -928.417, 1238.93, -869.934, 1532.35, -735.215, 1564.96, -593.184, 1499.75, -342.543, 1369.34), PackedVector2Array(927.373, 2640.87, 971.235, 2763.13, 1034.94, 2754.98, 1122.66, 2579.74, 1136.24, 2465.62, 1126.84, 2282.23, 1089.24, 2204.8, 1034.94, 2155.89, 932.594, 2208.87, 896.042, 2339.29, 900.22, 2514.53), PackedVector2Array(358.208, 2673.47, 374.917, 2934.3, 458.465, 2954.67, 533.657, 2824.26, 540.967, 2640.87, 522.169, 2530.83, 477.263, 2486, 395.804, 2543.06)])

[sub_resource type="Animation" id="Animation_xpqym"]
resource_name = "FadeToTrack1"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sounds/Track1:volume_db")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [-80.0, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sounds/Track2:volume_db")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 2, 80),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, -80.0, 0.0]
}

[sub_resource type="Animation" id="Animation_d13gp"]
resource_name = "FadeToTrack2"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sounds/Track1:volume_db")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, -80.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sounds/Track2:volume_db")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [-80.0, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_sd801"]
_data = {
"FadeToTrack1": SubResource("Animation_xpqym"),
"FadeToTrack2": SubResource("Animation_d13gp")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r37i2"]
size = Vector2(500.463, 171.25)

[node name="Main" type="Node2D"]
script = ExtResource("1_57487")

[node name="Sprite2D" type="Sprite2D" parent="."]
light_mask = 2
texture = ExtResource("1_i8wbn")

[node name="Camera" parent="." node_paths=PackedStringArray("character") instance=ExtResource("3_afvcr")]
limit_left = -1700
limit_top = -560
limit_right = 1700
limit_bottom = 560
editor_draw_limits = true
character = NodePath("../Objects/MainCharacter")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(-73, -349)
scale = Vector2(0.957544, 0.245374)
navigation_polygon = SubResource("NavigationPolygon_2eybf")

[node name="Objects" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Wall" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(1072, 349)
scale = Vector2(0.95, 0.95)
texture = ExtResource("4_rfiu0")
offset = Vector2(0, -50)

[node name="Stone" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(904, 229)
scale = Vector2(0.93, 1)
texture = ExtResource("5_syikp")
offset = Vector2(0, 20)

[node name="Harrow" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(798, 358)
scale = Vector2(0.93, 1)
texture = ExtResource("6_u74of")

[node name="Column" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(315, 306)
scale = Vector2(0.93, 1)
texture = ExtResource("7_asgqw")
offset = Vector2(0, -200)

[node name="Back" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(-1177, -39)
scale = Vector2(0.93, 0.93)
texture = ExtResource("8_u5rn4")
offset = Vector2(0, -110)

[node name="Back2" type="Sprite2D" parent="Objects"]
z_index = 1
y_sort_enabled = true
position = Vector2(-362, -143)
scale = Vector2(0.925, 0.92)
texture = ExtResource("8_fq6ch")

[node name="MainCharacter" parent="Objects" node_paths=PackedStringArray("light_node") instance=ExtResource("2_ydvm2")]
position = Vector2(159, 170)
light_node = NodePath("../../Lights/Light")
shadow_min_value = 0.3
shadow_max_value = 0.7
active_fake_z_axis = true

[node name="Lights" type="Node2D" parent="."]

[node name="Light" type="PointLight2D" parent="Lights"]
position = Vector2(163, -743)
texture = ExtResource("10_bj7sa")

[node name="Node2D" type="Node2D" parent="."]

[node name="Sounds" type="Node2D" parent="."]

[node name="Track1" type="AudioStreamPlayer2D" parent="Sounds"]
stream = ExtResource("11_0kkbj")
volume_db = -80.0

[node name="Track2" type="AudioStreamPlayer2D" parent="Sounds"]
position = Vector2(275, -322)
stream = ExtResource("12_ochyu")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_sd801")
}

[node name="AreaLeft" type="Area2D" parent="."]
position = Vector2(179, 484)

[node name="CollisionShape2D" type="CollisionShape2D" parent="AreaLeft"]
position = Vector2(-47.2196, -471.424)
rotation = -0.261799
shape = SubResource("RectangleShape2D_r37i2")

[node name="AreaRight" type="Area2D" parent="."]
position = Vector2(948, 481)

[node name="CollisionShape2D" type="CollisionShape2D" parent="AreaRight"]
position = Vector2(-313, 59)
rotation = -0.349066
shape = SubResource("RectangleShape2D_r37i2")

[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
[connection signal="area_entered" from="AreaLeft" to="." method="_on_area_left_area_entered"]
[connection signal="area_entered" from="AreaRight" to="." method="_on_area_right_area_entered"]
