[gd_scene load_steps=22 format=3 uid="uid://27hkpqds5jet"]

[ext_resource type="Script" path="res://scenes/game/levels/rooms/tikal/tikal_interior.gd" id="1_fat6x"]
[ext_resource type="Texture2D" uid="uid://dyvqsoeiyipjw" path="res://assets/sprites/scenes/tikal/mayan_temple_interior_upscaled.png" id="1_i8wbn"]
[ext_resource type="PackedScene" uid="uid://cw4xeegs5b2fq" path="res://scenes/game/character/main_character/main_character.tscn" id="2_ydvm2"]
[ext_resource type="PackedScene" uid="uid://bkjboqn4xwl7m" path="res://scenes/game/levels/camera/camera.tscn" id="3_afvcr"]
[ext_resource type="Texture2D" uid="uid://2k8xgtlbkeqo" path="res://assets/sprites/scenes/tikal/wall.png" id="4_rfiu0"]
[ext_resource type="Texture2D" uid="uid://cxsixgx0ekrdr" path="res://assets/sprites/scenes/tikal/stone.png" id="5_syikp"]
[ext_resource type="Texture2D" uid="uid://c5axhk7hpf60u" path="res://assets/sprites/scenes/tikal/harrow.png" id="6_u74of"]
[ext_resource type="Texture2D" uid="uid://bodavr3b173r7" path="res://assets/sprites/scenes/tikal/column.png" id="7_asgqw"]
[ext_resource type="Texture2D" uid="uid://i2gsxlah1hd4" path="res://assets/sprites/scenes/tikal/back2.png" id="8_fq6ch"]
[ext_resource type="Texture2D" uid="uid://2klthllqfn3e" path="res://assets/sprites/scenes/tikal/back.png" id="8_u5rn4"]
[ext_resource type="Texture2D" uid="uid://dsia3r6jcrovm" path="res://assets/sprites/scenes/tikal/light.png" id="10_bj7sa"]
[ext_resource type="AudioStream" uid="uid://dpavsjbuqixw5" path="res://assets/sounds/scene_1.mp3" id="11_0kkbj"]
[ext_resource type="PackedScene" uid="uid://bxpj28tlqwo5v" path="res://scenes/game/levels/objects/batching/particles.tscn" id="11_grgy6"]
[ext_resource type="AudioStream" uid="uid://cx0jnns63mbi6" path="res://assets/sounds/scene_2.mp3" id="12_ochyu"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_2eybf"]
vertices = PackedVector2Array(726.86, 2282.23, 757.145, 2620.49, 734.17, 2730.53, 576.475, 2314.84, 543.056, 2151.82, 651.667, 2086.61, 576.475, 1825.79, 584.83, 1532.36, 626.603, 1597.56, 685.086, 1695.37, -618.249, 3260.33, -837.56, 3423.35, -979.59, 2151.82, -841.737, 1825.79, -1094.47, 1890.99, -893.954, 1695.37, 1122.66, 2579.74, 1136.24, 2465.62, 1276.18, 2282.23, 1242.76, 2543.06, 1100.73, 2836.49, 1034.94, 2754.98, 998.388, 3032.11, 685.086, 1336.74, 818.762, 1238.93, 835.471, 1369.34, 693.441, 1434.55, 1126.84, 2282.23, 1244.85, 2151.82, 902.309, 1336.74, 935.728, 1532.36, 1019.27, 1956.2, 1061.05, 1890.99, 1111.18, 1825.79, 1211.43, 1956.2, 1089.24, 2204.8, 1034.94, 2155.89, 844.87, 2563.43, 776.988, 2217.03, 896.042, 2339.29, 900.22, 2514.53, -1061.05, 1369.34, -935.728, 1336.74, -908.575, 1564.96, 679.258, 1571.88, 726.86, 1760.58, 1203.08, 3358.14, 1211.43, 3912.4, 451.154, 3879.8, 426.09, 3847.19, 409.381, 3651.57, 409.381, 3358.14, 843.826, 3325.54, 533.657, 2824.26, 540.967, 2640.87, 618.249, 2640.87, 458.465, 2954.67, 384.317, 3260.33, 693.441, 1564.96, -1161.3, 2021.41, -1420.3, 1988.8, -1453.72, 1075.91, -1152.95, 1271.53, -1162.35, 1173.72, -1287.67, 1010.7, -928.417, 1238.93, -1062.09, 945.495, -719.549, 1010.7, 522.169, 2530.83, 342.543, 1499.75, 477.263, 2486, 776.988, 1890.99, 932.594, 2208.87, 1269.92, 1988.8, 927.373, 2640.87, 936.772, 2783.51, 971.235, 2763.13, 1102.82, 3032.11, 969.146, 3129.92, 1178.01, 3195.13, 340.454, 3129.92, 315.39, 3032.11, 374.917, 2934.3, 240.198, 2771.28, 358.208, 2673.47, 395.804, 2543.06, 148.296, 2608.27, 75.1924, 2380.04, 125.321, 2282.23, 100.257, 1890.99, 142.03, 1695.37, 142.03, 1467.15, 284.06, 1271.53, -243.331, 847.686, 182.759, 912.892, -342.543, 1369.34, -527.391, 978.099, -869.934, 1532.35, -593.184, 1499.75, -735.215, 1564.96)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5), PackedInt32Array(6, 7, 8, 9), PackedInt32Array(10, 11, 12, 13), PackedInt32Array(13, 12, 14, 15), PackedInt32Array(16, 17, 18, 19, 20), PackedInt32Array(21, 16, 20, 22), PackedInt32Array(23, 24, 25, 26), PackedInt32Array(18, 17, 27, 28), PackedInt32Array(25, 29, 30), PackedInt32Array(31, 32, 33, 34, 28, 35, 36), PackedInt32Array(28, 27, 35), PackedInt32Array(37, 1, 0, 38, 39, 40), PackedInt32Array(41, 42, 43), PackedInt32Array(9, 8, 44, 31, 45), PackedInt32Array(46, 47, 48, 49, 50, 51, 52), PackedInt32Array(53, 54, 55, 52), PackedInt32Array(56, 53, 52, 51, 57), PackedInt32Array(58, 26, 25, 30, 31), PackedInt32Array(59, 60, 61, 14), PackedInt32Array(41, 43, 15, 14, 61, 62), PackedInt32Array(63, 62, 61, 64), PackedInt32Array(65, 63, 64, 66, 67), PackedInt32Array(55, 54, 68), PackedInt32Array(69, 55, 68), PackedInt32Array(69, 68, 70), PackedInt32Array(44, 58, 31), PackedInt32Array(71, 45, 31), PackedInt32Array(38, 71, 31, 36, 72), PackedInt32Array(34, 73, 28), PackedInt32Array(38, 72, 39), PackedInt32Array(37, 40, 74, 75), PackedInt32Array(75, 74, 76, 22), PackedInt32Array(22, 76, 21), PackedInt32Array(22, 20, 77, 78), PackedInt32Array(52, 78, 77, 79, 46), PackedInt32Array(56, 57, 80, 81, 82), PackedInt32Array(82, 81, 83, 84), PackedInt32Array(85, 84, 83, 86, 87, 88), PackedInt32Array(69, 70, 85, 88, 89, 90), PackedInt32Array(69, 90, 91, 92), PackedInt32Array(93, 94, 92, 91, 95, 96), PackedInt32Array(97, 65, 67, 96, 95, 98, 99)])
outlines = Array[PackedVector2Array]([PackedVector2Array(142.03, 1467.15, 142.03, 1695.37, 100.257, 1890.99, 125.321, 2282.23, 75.1924, 2380.04, 148.296, 2608.27, 240.198, 2771.28, 315.39, 3032.11, 340.454, 3129.92, 384.317, 3260.33, 409.381, 3358.14, 409.381, 3651.57, 426.09, 3847.19, 451.154, 3879.8, 1211.43, 3912.4, 1203.08, 3358.14, 1178.01, 3195.13, 1102.82, 3032.11, 1100.73, 2836.49, 1242.76, 2543.06, 1276.18, 2282.23, 1244.85, 2151.82, 1269.92, 1988.8, 1211.43, 1956.2, 1111.18, 1825.79, 1061.05, 1890.99, 1019.27, 1956.2, 935.728, 1532.36, 902.309, 1336.74, 835.471, 1369.34, 818.762, 1238.93, 685.086, 1336.74, 693.441, 1434.55, 693.441, 1564.96, 679.258, 1571.88, 626.603, 1597.56, 584.83, 1532.36, 576.475, 1825.79, 685.086, 1695.37, 726.86, 1760.58, 776.988, 1890.99, 776.988, 2217.03, 726.86, 2282.23, 651.667, 2086.61, 543.056, 2151.82, 576.475, 2314.84, 734.17, 2730.53, 757.145, 2620.49, 844.87, 2563.43, 936.772, 2783.51, 998.388, 3032.11, 969.146, 3129.92, 843.826, 3325.54, 618.249, 2640.87, 342.543, 1499.75, 284.06, 1271.53, 182.759, 912.892, -243.331, 847.686, -527.391, 978.099, -719.549, 1010.7, -1062.09, 945.495, -1287.67, 1010.7, -1453.72, 1075.91, -1420.3, 1988.8, -1161.3, 2021.41, -1094.47, 1890.99, -979.59, 2151.82, -837.56, 3423.35, -618.249, 3260.33, -841.737, 1825.79, -893.954, 1695.37, -908.575, 1564.96, -935.728, 1336.74, -1061.05, 1369.34, -1152.95, 1271.53, -1162.35, 1173.72, -928.417, 1238.93, -869.934, 1532.35, -735.215, 1564.96, -593.184, 1499.75, -342.543, 1369.34), PackedVector2Array(927.373, 2640.87, 971.235, 2763.13, 1034.94, 2754.98, 1122.66, 2579.74, 1136.24, 2465.62, 1126.84, 2282.23, 1089.24, 2204.8, 1034.94, 2155.89, 932.594, 2208.87, 896.042, 2339.29, 900.22, 2514.53), PackedVector2Array(358.208, 2673.47, 374.917, 2934.3, 458.465, 2954.67, 533.657, 2824.26, 540.967, 2640.87, 522.169, 2530.83, 477.263, 2486, 395.804, 2543.06)])

[sub_resource type="Animation" id="Animation_xpqym"]
resource_name = "FadeToTrack1"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sounds/Track1:volume_db")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [-80.0, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sounds/Track2:volume_db")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 2, 80),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, -80.0, 0.0]
}

[sub_resource type="Animation" id="Animation_d13gp"]
resource_name = "FadeToTrack2"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sounds/Track1:volume_db")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, -80.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sounds/Track2:volume_db")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [-80.0, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_sd801"]
_data = {
"FadeToTrack1": SubResource("Animation_xpqym"),
"FadeToTrack2": SubResource("Animation_d13gp")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r37i2"]
size = Vector2(500.463, 171.25)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_uf4l7"]
size = Vector2(134, 182)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_mcpf1"]
size = Vector2(102.637, 42.3027)

[node name="Main" type="Node2D"]
script = ExtResource("1_fat6x")

[node name="Sprite2D" type="Sprite2D" parent="."]
light_mask = 2
texture = ExtResource("1_i8wbn")

[node name="Camera" parent="." node_paths=PackedStringArray("character") instance=ExtResource("3_afvcr")]
limit_left = -1700
limit_top = -560
limit_right = 1700
limit_bottom = 560
editor_draw_limits = true
character = NodePath("../Objects/MainCharacter")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(-73, -349)
scale = Vector2(0.957544, 0.245374)
navigation_polygon = SubResource("NavigationPolygon_2eybf")

[node name="Objects" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Wall" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(1072, 349)
scale = Vector2(0.95, 0.95)
texture = ExtResource("4_rfiu0")
offset = Vector2(0, -50)

[node name="Stone" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(904, 229)
scale = Vector2(0.93, 1)
texture = ExtResource("5_syikp")
offset = Vector2(0, 20)

[node name="Harrow" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(798, 358)
scale = Vector2(0.93, 1)
texture = ExtResource("6_u74of")

[node name="Column" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(315, 306)
scale = Vector2(0.93, 1)
texture = ExtResource("7_asgqw")
offset = Vector2(0, -200)

[node name="Back" type="Sprite2D" parent="Objects"]
y_sort_enabled = true
position = Vector2(-1177, -39)
scale = Vector2(0.93, 0.93)
texture = ExtResource("8_u5rn4")
offset = Vector2(0, -110)

[node name="Back2" type="Sprite2D" parent="Objects"]
z_index = 1
y_sort_enabled = true
position = Vector2(-362, -143)
scale = Vector2(0.925, 0.92)
texture = ExtResource("8_fq6ch")

[node name="MainCharacter" parent="Objects" node_paths=PackedStringArray("light_node") instance=ExtResource("2_ydvm2")]
position = Vector2(185, 231)
light_node = NodePath("../../Lights/Light")
shadow_min_value = 0.3
shadow_max_value = 0.7
active_fake_z_axis = true

[node name="Batching" parent="Objects" instance=ExtResource("11_grgy6")]
position = Vector2(-1130, 107)

[node name="Lights" type="Node2D" parent="."]

[node name="Light" type="PointLight2D" parent="Lights"]
position = Vector2(163, -743)
texture = ExtResource("10_bj7sa")

[node name="Node2D" type="Node2D" parent="."]

[node name="Sounds" type="Node2D" parent="."]

[node name="Track1" type="AudioStreamPlayer2D" parent="Sounds"]
stream = ExtResource("11_0kkbj")

[node name="Track2" type="AudioStreamPlayer2D" parent="Sounds"]
position = Vector2(275, -322)
stream = ExtResource("12_ochyu")
volume_db = -80.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_sd801")
}

[node name="AreaLeft" type="Area2D" parent="."]
position = Vector2(179, 484)

[node name="CollisionShape2D" type="CollisionShape2D" parent="AreaLeft"]
position = Vector2(-47.2196, -471.424)
rotation = -0.261799
shape = SubResource("RectangleShape2D_r37i2")

[node name="AreaRight" type="Area2D" parent="."]
position = Vector2(948, 481)

[node name="CollisionShape2D" type="CollisionShape2D" parent="AreaRight"]
position = Vector2(-313, 59)
rotation = -0.349066
shape = SubResource("RectangleShape2D_r37i2")

[node name="AreaToChurch" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="AreaToChurch"]
position = Vector2(-948, -59)
shape = SubResource("RectangleShape2D_uf4l7")

[node name="AreaToFire" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="AreaToFire"]
position = Vector2(1046.8, 112.082)
rotation = 0.357792
shape = SubResource("RectangleShape2D_mcpf1")

[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
[connection signal="area_entered" from="AreaLeft" to="." method="_on_area_left_area_entered"]
[connection signal="area_entered" from="AreaRight" to="." method="_on_area_right_area_entered"]
[connection signal="body_entered" from="AreaToChurch" to="." method="_on_area_to_church_body_entered"]
[connection signal="body_entered" from="AreaToFire" to="." method="_on_area_to_fire_body_entered"]
